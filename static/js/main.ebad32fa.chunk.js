(this["webpackJsonpit-incubator-todolist-ts"]=this["webpackJsonpit-incubator-todolist-ts"]||[]).push([[0],{103:function(e,t,n){},104:function(e,t,n){},129:function(e,t,n){"use strict";n.r(t);var a,r=n(0),c=n.n(r),i=n(9),o=n.n(i),l=(n(103),n(104),n(169)),u=n(170),s=n(171),d=n(165),f=n(131),m=n(166),b=n(173),E=n(174),O=n(172),g=n(16),p=n(7),T=n(79),h=n.n(T),j={baseURL:"https://social-network.samuraijs.com/api/1.1/",withCredentials:!0,headers:{"API-KEY":"34263072-624d-43a5-8a5f-75afa7ad4af4"}};!function(e){e[e.Low=0]="Low",e[e.Middle=1]="Middle",e[e.Hi=2]="Hi",e[e.Urgently=3]="Urgently",e[e.Later=4]="Later"}(a||(a={}));var S,v=h.a.create(j),y=function(){return v.get("todo-lists")},I=function(e){return v.post("todo-lists",{title:e})},C=function(e){return v.delete("todo-lists/".concat(e))},A=function(e,t){return v.put("todo-lists/".concat(e),{title:t})},k=function(e){return v.get("todo-lists/".concat(e,"/tasks"))},L=function(e,t){return v.post("todo-lists/".concat(e,"/tasks"),{title:t})},D=function(e,t){return v.delete("todo-lists/".concat(e,"/tasks/").concat(t))},w=function(e,t,n){return v.put("todo-lists/".concat(e,"/tasks/").concat(t),n)},N=function(e){return v.post("auth/login",e)},P=function(){return v.get("auth/me")},R=function(){return v.delete("auth/login")},G=function(e,t){e.messages.length?t(_(e.messages[0])):t(_("Some error occurred")),t(F("failed"))},H={isLoggedIn:!1},x=function(e){return{type:"login/SET-IS-LOGGED-IN",value:e}},K={status:"loading",error:null,isInitialized:!1},F=function(e){return{type:"APP/SET-STATUS",status:e}},_=function(e){return{type:"APP/SET-ERROR",error:e}},U=n(38),M=n(12),B=n(158),V=n(177),q=n(162),z=n(163),Y=n(175),Z=n(164),J=n(176),Q=n(88),$=function(){var e=Object(g.b)(),t=Object(g.c)((function(e){return e.auth.isLoggedIn})),n=Object(Q.a)({initialValues:{email:"",password:"",rememberMe:!1},validate:function(e){var t={};return e.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e.email)||(t.email="Invalid email address"):t.email="Required",e.password?e.password.length<6&&(t.password="Password has been 6 length"):t.password="Required",t},onSubmit:function(t){var a;e((a=t,function(e){e(F("loading")),N(a).then((function(t){console.log(t),0===t.data.resultCode?e(x(!0)):G(t.data,e)})).catch((function(t){e(_(t.message))})).finally((function(){e(F("succeeded"))}))})),n.resetForm()}});return t?c.a.createElement(M.a,{to:"/"}):c.a.createElement(B.a,{container:!0,justify:"center"},c.a.createElement(B.a,{item:!0,xs:4},c.a.createElement("form",{onSubmit:n.handleSubmit},c.a.createElement(V.a,null,c.a.createElement(q.a,null,c.a.createElement("p",null,"To log in get registered",c.a.createElement("a",{href:"https://social-network.samuraijs.com/",rel:"noopener noreferrer",target:"_blank"},"here")),c.a.createElement("p",null,"or use common test account credentials:"),c.a.createElement("p",null,"Email: free@samuraijs.com"),c.a.createElement("p",null,"Password: free")),c.a.createElement(z.a,null,c.a.createElement(Y.a,Object.assign({label:"Email",margin:"normal"},n.getFieldProps("email"),{onBlur:n.handleBlur})),n.touched&&n.errors.email?c.a.createElement("div",{style:{color:"red"}},n.errors.email):null,c.a.createElement(Y.a,Object.assign({type:"password",label:"Password",margin:"normal"},n.getFieldProps("password"),{onBlur:n.handleBlur})),n.touched&&n.errors.password?c.a.createElement("div",{style:{color:"red"}},n.errors.password):null,c.a.createElement(Z.a,Object.assign({label:"Remember me",control:c.a.createElement(J.a,null)},n.getFieldProps("rememberMe"))),c.a.createElement(m.a,{type:"submit",variant:"contained",color:"primary"},"Login"))))))},W=n(130),X=n(46),ee=n(167),te=c.a.memo((function(e){var t=Object(r.useState)(""),n=Object(X.a)(t,2),a=n[0],i=n[1],o=Object(r.useState)(null),l=Object(X.a)(o,2),u=l[0],s=l[1],f=function(){""!==a.trim()?e.addItem(a):s("Title is required"),i("")};return c.a.createElement("div",null,c.a.createElement(Y.a,{value:a,onChange:function(e){s(null),i(e.currentTarget.value)},onKeyDown:function(e){null!==u&&s(null),"Enter"===e.key&&f()},error:!!u,label:"Title",helperText:u}),c.a.createElement(d.a,{color:"primary",onClick:f,disabled:"loading"===e.entityStatus},c.a.createElement(ee.a,null)))})),ne=c.a.memo((function(e){var t=Object(r.useState)(!1),n=Object(X.a)(t,2),a=n[0],i=n[1],o=Object(r.useState)(e.value),l=Object(X.a)(o,2),u=l[0],s=l[1],d=function(){i(!0),s(e.value)};return a?c.a.createElement(Y.a,{value:u,onChange:function(e){s(e.currentTarget.value)},autoFocus:!0,onBlur:function(){i(!1),e.onChanges(u)}}):e.blured?c.a.createElement("span",{onDoubleClick:d},e.value):c.a.createElement("h3",{onDoubleClick:d},e.value)})),ae=n(86),re=n.n(ae),ce=n(168),ie=n(41),oe=n(45),le=[],ue=function(e,t){return{type:"CHANGE-TODOLIST-ENTITY-STATUS",id:e,entityStatus:t}},se={};!function(e){e[e.New=0]="New",e[e.inProgress=1]="inProgress",e[e.Completed=2]="Completed",e[e.Draft=3]="Draft"}(S||(S={}));var de=n(85),fe=n.n(de),me=c.a.memo((function(e){var t=e.task,n=t.status,a=t.title,r=t.id,i=e.onChangTaskStatus,o=e.onChanges,l=e.onDeleteHandler,u=e.entityStatus;return c.a.createElement("div",{className:n===S.Completed?fe.a.is_done:""},c.a.createElement(J.a,{color:"primary",checked:n===S.Completed,disabled:"loading"===u,onChange:function(e){return i(r,e.currentTarget.checked?S.Completed:S.New)}}),c.a.createElement(ne,{value:a,onChanges:function(e){o(r,e)},blured:!0}),c.a.createElement(d.a,{onClick:function(){return l(r)},disabled:"loading"===u},c.a.createElement(ce.a,null)))})),be=c.a.memo((function(e){var t=e.tasks,n=e.filter,a=e.title,i=e.changeFilter,o=e.idTodo,l=Object(g.b)(),u=Object(r.useCallback)(l,[]);Object(r.useEffect)((function(){var e;u((e=o,function(t){t(F("loading")),k(e).then((function(n){200===n.status&&t({type:"SET-TASKS",tasks:n.data.items,todolistId:e})})).catch((function(e){t(_(e.message))})).finally((function(){t(F("succeeded"))}))}))}),[u,o]);var s=Object(r.useCallback)((function(e){u(function(e,t){return function(n){n(F("loading")),n(ue(e,"loading")),L(e,t).then((function(t){0===t.data.resultCode?n({type:"ADD-TASK",task:t.data.data.item,TodoListId:e}):G(t.data,n)})).catch((function(e){n(_(e.message))})).finally((function(){n(F("succeeded")),n(ue(e,"failed"))}))}}(o,e))}),[u,o]),d=Object(r.useCallback)((function(e){u(function(e,t){return function(n){n(ue(e,"loading")),n(F("loading")),A(e,t).then((function(a){0===a.data.resultCode?n(function(e,t){return{type:"CHANGE-TODOLIST-TITLE",id:e,title:t}}(e,t)):G(a.data,n)})).catch((function(e){n(_(e.message))})).finally((function(){n(F("succeeded")),n(ue(e,"failed"))}))}}(o,e))}),[u,o]),f=Object(r.useCallback)((function(){var e;u((e=o,function(t){t(ue(e,"loading")),t(F("loading")),C(e).then((function(n){0===n.data.resultCode?t(function(e){return{type:"REMOVE-TODOLIST",id:e}}(e)):G(n.data,t)})).catch((function(e){t(_(e.message))})).finally((function(){t(F("succeeded")),t(ue(e,"failed"))}))}))}),[u,o]),b=t;"Active"===n&&(b=t.filter((function(e){return e.status===S.New}))),"Completed"===n&&(b=t.filter((function(e){return e.status===S.Completed})));var E=Object(r.useCallback)((function(e,t){u(function(e,t,n){return function(a,r){var c=r().tasks[t].find((function(t){return t.id===e}));a(F("loading")),a(ue(t,"loading")),c&&w(t,e,{title:c.title,startDate:c.startDate,priority:c.priority,description:c.description,deadline:c.deadline,status:n}).then((function(r){0===r.data.resultCode?(a(function(e,t,n){return{type:"CHANGE-TASK-STATUS",taskId:e,status:t,todoListId:n}}(e,n,t)),a(ue(t,"failed"))):G(r.data,a)})).catch((function(e){a(_(e.message))})).finally((function(){a(F("succeeded")),a(ue(t,"failed"))}))}}(e,o,t))}),[u,o]),O=Object(r.useCallback)((function(e,t){u(function(e,t,n){return function(a,r){var c=r().tasks[n].find((function(t){return t.id===e}));a(F("loading")),a(ue(n,"loading")),c&&w(n,e,{title:t,deadline:c.deadline,description:c.description,priority:c.priority,startDate:c.startDate,status:c.status}).then((function(r){0===r.data.resultCode?a(function(e,t,n){return{type:"CHANGE-TASK-TITLE",taskId:e,title:t,todoListId:n}}(e,t,n)):G(r.data,a)})).catch((function(e){a(_(e.message))})).finally((function(){a(F("succeeded")),a(ue(n,"failed"))}))}}(e,t,o))}),[u,o]),p=Object(r.useCallback)((function(e){var t,n;u((t=e,n=o,function(e){e(F("loading")),e(ue(n,"loading")),D(n,t).then((function(a){0===a.data.resultCode?e(function(e,t){return{type:"REMOVE-TASK",taskId:e,TodoListId:t}}(t,n)):G(a.data,e)})).catch((function(t){e(_(t.message))})).finally((function(){e(F("succeeded")),e(ue(n,"failed"))}))}))}),[u,o]);return c.a.createElement("div",null,c.a.createElement(ne,{value:a,onChanges:d,blured:!1}),c.a.createElement(te,{addItem:s,entityStatus:e.entityStatus}),c.a.createElement("div",null,b.map((function(t){return c.a.createElement(me,{task:t,onChangTaskStatus:E,onChanges:O,onDeleteHandler:p,entityStatus:e.entityStatus,key:t.id})}))),c.a.createElement("div",{className:"btn_remove"},c.a.createElement(m.a,{variant:"All"===n?"outlined":"text",onClick:function(){return i("All",o)}},"All"),c.a.createElement(m.a,{variant:"Active"===n?"outlined":"text",color:"primary",onClick:function(){return i("Active",o)}},"Active"),c.a.createElement(m.a,{color:"secondary",variant:"Completed"===n?"outlined":"text",onClick:function(){return i("Completed",o)}},"Completed")),c.a.createElement(m.a,{variant:"contained",color:"secondary",startIcon:c.a.createElement(re.a,null),disabled:"loading"===e.entityStatus,onClick:f},"Remove List"))})),Ee=function(){var e=Object(g.c)((function(e){return e.todolists})),t=Object(g.c)((function(e){return e.tasks})),n=Object(g.c)((function(e){return e.auth.isLoggedIn})),a=Object(g.b)(),i=Object(r.useCallback)(a,[]);Object(r.useEffect)((function(){n&&i((function(e){e(F("loading")),y().then((function(t){200===t.status&&e({type:"SET-TODOLISTS",todolists:t.data})})).catch((function(t){e(_(t.message))})).finally((function(){e(F("succeeded"))}))}))}),[i,n]);var o=Object(r.useCallback)((function(e,t){i({type:"CHANGE-TODOLIST-FILTER",id:t,filter:e})}),[i]);return n?c.a.createElement(c.a.Fragment,null,c.a.createElement(B.a,{container:!0,style:{padding:"20px"}},c.a.createElement(te,{addItem:function(e){a(function(e){return function(t){t(F("loading")),I(e).then((function(e){0===e.data.resultCode?t({type:"ADD-TODOLIST",todolist:e.data.data.item}):G(e.data,t)})).catch((function(e){t(_(e.message))})).finally((function(){t(F("succeeded"))}))}}(e))}})),c.a.createElement(B.a,{container:!0,spacing:3},e.map((function(e){var n=e.id,a=e.title,r=e.filter,i=e.entityStatus;return c.a.createElement(B.a,{item:!0,key:n},c.a.createElement(W.a,{style:{padding:"10px"}},c.a.createElement(be,{key:n,idTodo:n,title:a,tasks:t[n],entityStatus:i,changeFilter:o,filter:r})))})))):c.a.createElement(M.a,{to:"/login"})},Oe=function(){var e=Object(g.c)((function(e){return e.app.status})),t=Object(g.c)((function(e){return e.app.isInitialized})),n=Object(g.c)((function(e){return e.auth.isLoggedIn})),a=Object(g.b)(),i=Object(r.useCallback)(a,[]);if(Object(r.useEffect)((function(){i((function(e){e(F("loading")),P().then((function(t){0===t.data.resultCode?e(x(!0)):G(t.data,e)})).catch((function(t){e(_(t.message))})).finally((function(){e(F("succeeded")),e({type:"APP/SET-INITIAL-APP",value:!0})}))}))}),[i]),!t)return c.a.createElement("div",{style:{position:"fixed",top:"30%",textAlign:"center",width:"100%"}},c.a.createElement(l.a,null));return c.a.createElement("div",{className:"App"},c.a.createElement(u.a,null,c.a.createElement(s.a,null,c.a.createElement(d.a,{edge:"start",color:"inherit","aria-label":"menu"},c.a.createElement(O.a,null)),c.a.createElement(f.a,{variant:"h6"},"News"),n?c.a.createElement(m.a,{className:"btn_app",onClick:function(){a((function(e){e(F("loading")),R().then((function(t){0===t.data.resultCode?(e(x(!1)),e(F("succeeded"))):G(t.data,e)})).catch((function(t){e(_(t.message))}))}))}},"Log Out"):c.a.createElement(U.b,{to:"/login",className:"link_app"}," login")),"loading"===e&&c.a.createElement(b.a,{color:"secondary"})),c.a.createElement(E.a,{fixed:!0},c.a.createElement(M.d,null,c.a.createElement(M.b,{exact:!0,path:"/",render:function(){return c.a.createElement(Ee,null)}}),c.a.createElement(M.b,{component:$,path:"/login"}),c.a.createElement(M.b,{path:"/404",render:function(){return c.a.createElement("h1",null,"404: PAGE NOT FOUND")}}),c.a.createElement(M.a,{from:"*",to:"/404"}))))},ge=n(40),pe=n(87),Te=Object(ge.c)({tasks:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:se,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET-TODOLISTS":var n=Object(p.a)({},e);return t.todolists.forEach((function(e){n[e.id]=[]})),n;case"SET-TASKS":var a=Object(p.a)({},e);return a[t.todolistId]=t.tasks,a;case"REMOVE-TASK":return e[t.TodoListId]=e[t.TodoListId].filter((function(e){return e.id!==t.taskId})),Object(p.a)({},e);case"ADD-TASK":var r=e[t.TodoListId];return e[t.TodoListId]=[t.task].concat(Object(oe.a)(r)),Object(p.a)({},e);case"CHANGE-TASK-STATUS":return Object(p.a)(Object(p.a)({},e),{},Object(ie.a)({},t.todoListId,e[t.todoListId].map((function(e){return e.id!==t.taskId?e:Object(p.a)(Object(p.a)({},e),{},{status:t.status})}))));case"CHANGE-TASK-TITLE":return Object(p.a)(Object(p.a)({},e),{},Object(ie.a)({},t.todoListId,e[t.todoListId].map((function(e){return e.id!==t.taskId?e:Object(p.a)(Object(p.a)({},e),{},{title:t.title})}))));case"REMOVE-TODOLIST":var c=Object(p.a)({},e);return delete c[t.id],c;case"ADD-TODOLIST":return Object(p.a)(Object(p.a)({},e),{},Object(ie.a)({},t.todolist.id,[]));default:return e}},todolists:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:le,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET-TODOLISTS":return t.todolists.map((function(e){return Object(p.a)(Object(p.a)({},e),{},{filter:"All",entityStatus:"idle"})}));case"REMOVE-TODOLIST":return e.filter((function(e){return e.id!==t.id}));case"ADD-TODOLIST":var n=Object(p.a)(Object(p.a)({},t.todolist),{},{filter:"All",entityStatus:"idle"});return[].concat(Object(oe.a)(e),[n]);case"CHANGE-TODOLIST-TITLE":return Object(oe.a)(e.map((function(e){return e.id!==t.id?e:Object(p.a)(Object(p.a)({},e),{},{title:t.title})})));case"CHANGE-TODOLIST-FILTER":return Object(oe.a)(e.map((function(e){return e.id!==t.id?e:Object(p.a)(Object(p.a)({},e),{},{filter:t.filter})})));case"CHANGE-TODOLIST-ENTITY-STATUS":return e.map((function(e){return e.id===t.id?Object(p.a)(Object(p.a)({},e),{},{entityStatus:t.entityStatus}):e}));default:return e}},app:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"APP/SET-STATUS":return Object(p.a)(Object(p.a)({},e),{},{status:t.status});case"APP/SET-ERROR":return Object(p.a)(Object(p.a)({},e),{},{error:t.error});case"APP/SET-INITIAL-APP":return Object(p.a)(Object(p.a)({},e),{},{isInitialized:t.value});default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"login/SET-IS-LOGGED-IN":return Object(p.a)(Object(p.a)({},e),{},{isLoggedIn:t.value});default:return e}}}),he=Object(ge.d)(Te,Object(ge.a)(pe.a));window.store=he,o.a.render(c.a.createElement(U.a,null,c.a.createElement(g.a,{store:he},c.a.createElement(Oe,null))),document.getElementById("root"))},85:function(e,t,n){e.exports={is_done:"Task_is_done__3rABQ"}},98:function(e,t,n){e.exports=n(129)}},[[98,1,2]]]);
//# sourceMappingURL=main.ebad32fa.chunk.js.map